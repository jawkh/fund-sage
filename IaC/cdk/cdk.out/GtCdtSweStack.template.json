{
 "Resources": {
  "GtCdtSweVpcBA6BF201": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "172.16.0.0/24",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/Resource"
   }
  },
  "GtCdtSweVpcPublicSubnet1Subnet53D956DB": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "ap-southeast-1a",
    "CidrBlock": "172.16.0.0/26",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/Subnet"
   }
  },
  "GtCdtSweVpcPublicSubnet1RouteTable012B349A": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/RouteTable"
   }
  },
  "GtCdtSweVpcPublicSubnet1RouteTableAssociationFBA5E616": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPublicSubnet1RouteTable012B349A"
    },
    "SubnetId": {
     "Ref": "GtCdtSweVpcPublicSubnet1Subnet53D956DB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/RouteTableAssociation"
   }
  },
  "GtCdtSweVpcPublicSubnet1DefaultRoute4E10BB4A": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "GtCdtSweVpcIGW4E305021"
    },
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPublicSubnet1RouteTable012B349A"
    }
   },
   "DependsOn": [
    "GtCdtSweVpcVPCGWA6792732"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/DefaultRoute"
   }
  },
  "GtCdtSweVpcPublicSubnet1EIPF299E749": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/EIP"
   }
  },
  "GtCdtSweVpcPublicSubnet1NATGateway5BAEF9E3": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "GtCdtSweVpcPublicSubnet1EIPF299E749",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "GtCdtSweVpcPublicSubnet1Subnet53D956DB"
    },
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1"
     }
    ]
   },
   "DependsOn": [
    "GtCdtSweVpcPublicSubnet1DefaultRoute4E10BB4A",
    "GtCdtSweVpcPublicSubnet1RouteTableAssociationFBA5E616"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet1/NATGateway"
   }
  },
  "GtCdtSweVpcPublicSubnet2SubnetF8FBA8DF": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "ap-southeast-1b",
    "CidrBlock": "172.16.0.64/26",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2/Subnet"
   }
  },
  "GtCdtSweVpcPublicSubnet2RouteTable86830209": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2/RouteTable"
   }
  },
  "GtCdtSweVpcPublicSubnet2RouteTableAssociation15830A21": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPublicSubnet2RouteTable86830209"
    },
    "SubnetId": {
     "Ref": "GtCdtSweVpcPublicSubnet2SubnetF8FBA8DF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2/RouteTableAssociation"
   }
  },
  "GtCdtSweVpcPublicSubnet2DefaultRoute1B0C5517": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "GtCdtSweVpcIGW4E305021"
    },
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPublicSubnet2RouteTable86830209"
    }
   },
   "DependsOn": [
    "GtCdtSweVpcVPCGWA6792732"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PublicSubnet2/DefaultRoute"
   }
  },
  "GtCdtSweVpcPrivateSubnet1SubnetB12C4110": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "ap-southeast-1a",
    "CidrBlock": "172.16.0.128/26",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1/Subnet"
   }
  },
  "GtCdtSweVpcPrivateSubnet1RouteTable9C949174": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1/RouteTable"
   }
  },
  "GtCdtSweVpcPrivateSubnet1RouteTableAssociation33E7A1C6": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPrivateSubnet1RouteTable9C949174"
    },
    "SubnetId": {
     "Ref": "GtCdtSweVpcPrivateSubnet1SubnetB12C4110"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1/RouteTableAssociation"
   }
  },
  "GtCdtSweVpcPrivateSubnet1DefaultRouteC63CD8C9": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "GtCdtSweVpcPublicSubnet1NATGateway5BAEF9E3"
    },
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPrivateSubnet1RouteTable9C949174"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet1/DefaultRoute"
   }
  },
  "GtCdtSweVpcPrivateSubnet2SubnetF23B6E02": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "ap-southeast-1b",
    "CidrBlock": "172.16.0.192/26",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2/Subnet"
   }
  },
  "GtCdtSweVpcPrivateSubnet2RouteTable49953A1E": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2/RouteTable"
   }
  },
  "GtCdtSweVpcPrivateSubnet2RouteTableAssociationF77B38FA": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPrivateSubnet2RouteTable49953A1E"
    },
    "SubnetId": {
     "Ref": "GtCdtSweVpcPrivateSubnet2SubnetF23B6E02"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2/RouteTableAssociation"
   }
  },
  "GtCdtSweVpcPrivateSubnet2DefaultRouteEEA9E341": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "GtCdtSweVpcPublicSubnet1NATGateway5BAEF9E3"
    },
    "RouteTableId": {
     "Ref": "GtCdtSweVpcPrivateSubnet2RouteTable49953A1E"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/PrivateSubnet2/DefaultRoute"
   }
  },
  "GtCdtSweVpcIGW4E305021": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "GtCdtSweStack/GtCdtSweVpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/IGW"
   }
  },
  "GtCdtSweVpcVPCGWA6792732": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "GtCdtSweVpcIGW4E305021"
    },
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpc/VPCGW"
   }
  },
  "NlbSecurityGroup08F7DC4B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Allow traffic to ECS tasks from NLB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "Description": "Allow inbound traffic to ECS from NLB",
      "FromPort": 5000,
      "IpProtocol": "tcp",
      "SourceSecurityGroupId": {
       "Fn::GetAtt": [
        "EcsSecurityGroup44008BF1",
        "GroupId"
       ]
      },
      "ToPort": 5000
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/NlbSecurityGroup/Resource"
   }
  },
  "EcsSecurityGroup44008BF1": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Allow outbound traffic from ECS tasks",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/EcsSecurityGroup/Resource"
   }
  },
  "EcsSecurityGroupfromGtCdtSweStackNlbSecurityGroup1D1FD50F50008ECAAA3C": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow inbound traffic from NLB to ECS",
    "FromPort": 5000,
    "GroupId": {
     "Fn::GetAtt": [
      "EcsSecurityGroup44008BF1",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "NlbSecurityGroup08F7DC4B",
      "GroupId"
     ]
    },
    "ToPort": 5000
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/EcsSecurityGroup/from GtCdtSweStackNlbSecurityGroup1D1FD50F:5000"
   }
  },
  "DbSecurityGroupE9D701AD": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Allow inbound traffic to Aurora DB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/DbSecurityGroup/Resource"
   }
  },
  "DbSecurityGroupfromGtCdtSweStackEcsSecurityGroup399CD1D9543224D64DE1": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow ECS tasks to connect to Aurora DB",
    "FromPort": 5432,
    "GroupId": {
     "Fn::GetAtt": [
      "DbSecurityGroupE9D701AD",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "EcsSecurityGroup44008BF1",
      "GroupId"
     ]
    },
    "ToPort": 5432
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/DbSecurityGroup/from GtCdtSweStackEcsSecurityGroup399CD1D9:5432"
   }
  },
  "GtCdtSweDatabaseSubnets5968CC8C": {
   "Type": "AWS::RDS::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnets for GtCdtSweDatabase database",
    "SubnetIds": [
     {
      "Ref": "GtCdtSweVpcPrivateSubnet1SubnetB12C4110"
     },
     {
      "Ref": "GtCdtSweVpcPrivateSubnet2SubnetF23B6E02"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Subnets/Default"
   }
  },
  "GtCdtSweStackGtCdtSweDatabaseSecret2D753B483fdaad7efa858a3daf9490cf0a702aeb": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "Description": {
     "Fn::Join": [
      "",
      [
       "Generated by the CDK for stack: ",
       {
        "Ref": "AWS::StackName"
       }
      ]
     ]
    },
    "GenerateSecretString": {
     "ExcludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\",
     "GenerateStringKey": "password",
     "PasswordLength": 30,
     "SecretStringTemplate": "{\"username\":\"postgres\"}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Secret/Resource"
   }
  },
  "GtCdtSweDatabaseSecretAttachmentAF048064": {
   "Type": "AWS::SecretsManager::SecretTargetAttachment",
   "Properties": {
    "SecretId": {
     "Ref": "GtCdtSweStackGtCdtSweDatabaseSecret2D753B483fdaad7efa858a3daf9490cf0a702aeb"
    },
    "TargetId": {
     "Ref": "GtCdtSweDatabase78F59F6C"
    },
    "TargetType": "AWS::RDS::DBCluster"
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Secret/Attachment/Resource"
   }
  },
  "GtCdtSweDatabase78F59F6C": {
   "Type": "AWS::RDS::DBCluster",
   "Properties": {
    "CopyTagsToSnapshot": true,
    "DBClusterParameterGroupName": "default.aurora-postgresql16",
    "DBSubnetGroupName": {
     "Ref": "GtCdtSweDatabaseSubnets5968CC8C"
    },
    "DatabaseName": "fund_sage_db",
    "Engine": "aurora-postgresql",
    "EngineVersion": "16.3",
    "MasterUserPassword": {
     "Fn::Join": [
      "",
      [
       "{{resolve:secretsmanager:",
       {
        "Ref": "GtCdtSweStackGtCdtSweDatabaseSecret2D753B483fdaad7efa858a3daf9490cf0a702aeb"
       },
       ":SecretString:password::}}"
      ]
     ]
    },
    "MasterUsername": "postgres",
    "Port": 5432,
    "VpcSecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "DbSecurityGroupE9D701AD",
       "GroupId"
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Resource"
   }
  },
  "GtCdtSweDatabaseInstance104E685DB": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "DBClusterIdentifier": {
     "Ref": "GtCdtSweDatabase78F59F6C"
    },
    "DBInstanceClass": "db.t3.medium",
    "DBSubnetGroupName": {
     "Ref": "GtCdtSweDatabaseSubnets5968CC8C"
    },
    "Engine": "aurora-postgresql",
    "PubliclyAccessible": false
   },
   "DependsOn": [
    "GtCdtSweVpcPrivateSubnet1DefaultRouteC63CD8C9",
    "GtCdtSweVpcPrivateSubnet1RouteTableAssociation33E7A1C6",
    "GtCdtSweVpcPrivateSubnet2DefaultRouteEEA9E341",
    "GtCdtSweVpcPrivateSubnet2RouteTableAssociationF77B38FA"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Instance1"
   }
  },
  "GtCdtSweDatabaseInstance2FDA98039": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "DBClusterIdentifier": {
     "Ref": "GtCdtSweDatabase78F59F6C"
    },
    "DBInstanceClass": "db.t3.medium",
    "DBSubnetGroupName": {
     "Ref": "GtCdtSweDatabaseSubnets5968CC8C"
    },
    "Engine": "aurora-postgresql",
    "PubliclyAccessible": false
   },
   "DependsOn": [
    "GtCdtSweVpcPrivateSubnet1DefaultRouteC63CD8C9",
    "GtCdtSweVpcPrivateSubnet1RouteTableAssociation33E7A1C6",
    "GtCdtSweVpcPrivateSubnet2DefaultRouteEEA9E341",
    "GtCdtSweVpcPrivateSubnet2RouteTableAssociationF77B38FA"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabase/Instance2"
   }
  },
  "GtCdtSweDatabaseUrlSecret0CD68323": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "Description": "DATABASE_URL constructed from Aurora PostgreSQL cluster credentials",
    "SecretString": {
     "Fn::Join": [
      "",
      [
       "postgresql+psycopg2://{{resolve:secretsmanager:",
       {
        "Ref": "GtCdtSweDatabaseSecretAttachmentAF048064"
       },
       ":SecretString:username::}}:{{resolve:secretsmanager:",
       {
        "Ref": "GtCdtSweDatabaseSecretAttachmentAF048064"
       },
       ":SecretString:password::}}@",
       {
        "Fn::GetAtt": [
         "GtCdtSweDatabase78F59F6C",
         "Endpoint.Address"
        ]
       },
       ":",
       {
        "Fn::GetAtt": [
         "GtCdtSweDatabase78F59F6C",
         "Endpoint.Port"
        ]
       },
       "/fund_sage_db"
      ]
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweDatabaseUrlSecret/Resource"
   }
  },
  "GtCdtSweClusterBAD2B1F0": {
   "Type": "AWS::ECS::Cluster",
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweCluster/Resource"
   }
  },
  "GtCdtSweAppTaskDefTaskRole3D1A54C4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/TaskRole/Resource"
   }
  },
  "GtCdtSweAppTaskDefTaskRoleDefaultPolicyDA1A6410": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ssmmessages:CreateControlChannel",
        "ssmmessages:CreateDataChannel",
        "ssmmessages:OpenControlChannel",
        "ssmmessages:OpenDataChannel"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "logs:DescribeLogGroups",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:DescribeLogStreams",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GtCdtSweAppTaskDefTaskRoleDefaultPolicyDA1A6410",
    "Roles": [
     {
      "Ref": "GtCdtSweAppTaskDefTaskRole3D1A54C4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/TaskRole/DefaultPolicy/Resource"
   }
  },
  "GtCdtSweAppTaskDef151D8F90": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Command": [
       "/bin/bash",
       "-c",
       "./wait-for-it.sh ${DBHOST_PORT} --timeout=30 --strict -- echo 'Database is up' && poetry run python bin/__init_sys_database.py && poetry run python bin/__data_prep_administrators.py && poetry run python bin/__data_prep_supported_schemes.py && poetry run python bin/__data_prep_random_applicants.py && poetry run python bin/__data_prep_applications.py && if [ \"${FLASK_DEBUG}\" = \"1\" ]; then poetry run python -m debugpy --listen ${DEBUGYPY_HOST}:${DEBUGYPY_PORT} --wait-for-client -m flask run --no-reload --host=${FLASK_RUN_HOST} --port=${FLASK_RUN_PORT}; else poetry run flask run --host=${FLASK_RUN_HOST} --port=${FLASK_RUN_PORT}; fi"
      ],
      "Environment": [
       {
        "Name": "FLASK_APP",
        "Value": "api/__init__.py"
       },
       {
        "Name": "FLASK_RUN_HOST",
        "Value": "0.0.0.0"
       },
       {
        "Name": "FLASK_RUN_PORT",
        "Value": "5000"
       },
       {
        "Name": "FLASK_ENV",
        "Value": "development"
       },
       {
        "Name": "SECRET_KEY",
        "Value": "change-this-in-production"
       },
       {
        "Name": "JWT_SECRET_KEY",
        "Value": "change-this-in-production"
       },
       {
        "Name": "JWT_ACCESS_TOKEN_EXPIRES",
        "Value": "3600"
       },
       {
        "Name": "APPLICATION_ROOT",
        "Value": "/"
       },
       {
        "Name": "PREFERRED_URL_SCHEME",
        "Value": "https"
       },
       {
        "Name": "MAX_PASSWORD_RETRIES",
        "Value": "5"
       },
       {
        "Name": "PASSWORD_RETRIES_TIME_WINDOW_MINUTES",
        "Value": "15"
       },
       {
        "Name": "FLASK_DEBUG",
        "Value": "false"
       },
       {
        "Name": "DEBUGYPY_HOST",
        "Value": "0.0.0.0"
       },
       {
        "Name": "DEBUGYPY_PORT",
        "Value": "5678"
       },
       {
        "Name": "PROVISION_DUMMY_APPLICATIONS",
        "Value": "true"
       },
       {
        "Name": "PROVISION_DUMMY_APPLICANTS",
        "Value": "true"
       },
       {
        "Name": "DBHOST_PORT",
        "Value": {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "GtCdtSweDatabase78F59F6C",
             "Endpoint.Address"
            ]
           },
           ":",
           {
            "Fn::GetAtt": [
             "GtCdtSweDatabase78F59F6C",
             "Endpoint.Port"
            ]
           }
          ]
         ]
        }
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "272147878669.dkr.ecr.ap-southeast-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/gt-cdt-swe-app:fundsage-latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "GtCdtSweAppTaskDefGtCdtSweContainerLogGroup2B169396"
        },
        "awslogs-stream-prefix": "GtCdtSweApp",
        "awslogs-region": "ap-southeast-1"
       }
      },
      "Name": "GtCdtSweContainer",
      "PortMappings": [
       {
        "ContainerPort": 5000,
        "Protocol": "tcp"
       }
      ],
      "Secrets": [
       {
        "Name": "DATABASE_URL",
        "ValueFrom": {
         "Ref": "GtCdtSweDatabaseUrlSecret0CD68323"
        }
       }
      ]
     }
    ],
    "Cpu": "256",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "GtCdtSweAppTaskDefExecutionRoleD358D3E7",
      "Arn"
     ]
    },
    "Family": "GtCdtSweStackGtCdtSweAppTaskDef0C7A4663",
    "Memory": "512",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "GtCdtSweAppTaskDefTaskRole3D1A54C4",
      "Arn"
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/Resource"
   }
  },
  "GtCdtSweAppTaskDefGtCdtSweContainerLogGroup2B169396": {
   "Type": "AWS::Logs::LogGroup",
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/GtCdtSweContainer/LogGroup/Resource"
   }
  },
  "GtCdtSweAppTaskDefExecutionRoleD358D3E7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/ExecutionRole/Resource"
   }
  },
  "GtCdtSweAppTaskDefExecutionRoleDefaultPolicy9637FE68": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":ecr:ap-southeast-1:272147878669:repository/gt-cdt-swe-app"
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GtCdtSweAppTaskDefGtCdtSweContainerLogGroup2B169396",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "GtCdtSweDatabaseUrlSecret0CD68323"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GtCdtSweAppTaskDefExecutionRoleDefaultPolicy9637FE68",
    "Roles": [
     {
      "Ref": "GtCdtSweAppTaskDefExecutionRoleD358D3E7"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppTaskDef/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "GtCdtSweNLBA0E95C6B": {
   "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
   "Properties": {
    "LoadBalancerAttributes": [
     {
      "Key": "deletion_protection.enabled",
      "Value": "false"
     }
    ],
    "Scheme": "internal",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "NlbSecurityGroup08F7DC4B",
       "GroupId"
      ]
     }
    ],
    "Subnets": [
     {
      "Ref": "GtCdtSweVpcPrivateSubnet1SubnetB12C4110"
     },
     {
      "Ref": "GtCdtSweVpcPrivateSubnet2SubnetF23B6E02"
     }
    ],
    "Type": "network"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweNLB/Resource"
   }
  },
  "GtCdtSweNLBGtCdtSweListener87D089E9": {
   "Type": "AWS::ElasticLoadBalancingV2::Listener",
   "Properties": {
    "DefaultActions": [
     {
      "TargetGroupArn": {
       "Ref": "GtCdtSweNLBGtCdtSweListenerECSGroup61733034"
      },
      "Type": "forward"
     }
    ],
    "LoadBalancerArn": {
     "Ref": "GtCdtSweNLBA0E95C6B"
    },
    "Port": 5000,
    "Protocol": "TCP"
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweNLB/GtCdtSweListener/Resource"
   }
  },
  "GtCdtSweNLBGtCdtSweListenerECSGroup61733034": {
   "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
   "Properties": {
    "HealthCheckIntervalSeconds": 30,
    "HealthCheckPath": "/swagger/",
    "HealthCheckProtocol": "HTTP",
    "HealthyThresholdCount": 3,
    "Port": 5000,
    "Protocol": "TCP",
    "TargetType": "ip",
    "UnhealthyThresholdCount": 3,
    "VpcId": {
     "Ref": "GtCdtSweVpcBA6BF201"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweNLB/GtCdtSweListener/ECSGroup/Resource"
   }
  },
  "GtCdtSweAppService6F8B2FAD": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "GtCdtSweClusterBAD2B1F0"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 1,
    "EnableECSManagedTags": false,
    "EnableExecuteCommand": true,
    "HealthCheckGracePeriodSeconds": 60,
    "LaunchType": "FARGATE",
    "LoadBalancers": [
     {
      "ContainerName": "GtCdtSweContainer",
      "ContainerPort": 5000,
      "TargetGroupArn": {
       "Ref": "GtCdtSweNLBGtCdtSweListenerECSGroup61733034"
      }
     }
    ],
    "NetworkConfiguration": {
     "AwsvpcConfiguration": {
      "AssignPublicIp": "DISABLED",
      "SecurityGroups": [
       {
        "Fn::GetAtt": [
         "EcsSecurityGroup44008BF1",
         "GroupId"
        ]
       }
      ],
      "Subnets": [
       {
        "Ref": "GtCdtSweVpcPrivateSubnet1SubnetB12C4110"
       },
       {
        "Ref": "GtCdtSweVpcPrivateSubnet2SubnetF23B6E02"
       }
      ]
     }
    },
    "TaskDefinition": {
     "Ref": "GtCdtSweAppTaskDef151D8F90"
    }
   },
   "DependsOn": [
    "GtCdtSweAppTaskDefTaskRoleDefaultPolicyDA1A6410",
    "GtCdtSweAppTaskDefTaskRole3D1A54C4",
    "GtCdtSweNLBGtCdtSweListenerECSGroup61733034",
    "GtCdtSweNLBGtCdtSweListener87D089E9"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppService/Service"
   }
  },
  "GtCdtSweAppServiceTaskCountTarget2396D341": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 2,
    "MinCapacity": 1,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "GtCdtSweClusterBAD2B1F0"
       },
       "/",
       {
        "Fn::GetAtt": [
         "GtCdtSweAppService6F8B2FAD",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::272147878669:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "GtCdtSweAppTaskDefTaskRoleDefaultPolicyDA1A6410",
    "GtCdtSweAppTaskDefTaskRole3D1A54C4"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppService/TaskCount/Target/Resource"
   }
  },
  "GtCdtSweAppServiceTaskCountTargetCpuScalingB158457A": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "GtCdtSweStackGtCdtSweAppServiceTaskCountTargetCpuScalingAB19D45E",
    "PolicyType": "TargetTrackingScaling",
    "ScalingTargetId": {
     "Ref": "GtCdtSweAppServiceTaskCountTarget2396D341"
    },
    "TargetTrackingScalingPolicyConfiguration": {
     "PredefinedMetricSpecification": {
      "PredefinedMetricType": "ECSServiceAverageCPUUtilization"
     },
     "ScaleInCooldown": 60,
     "ScaleOutCooldown": 60,
     "TargetValue": 70
    }
   },
   "DependsOn": [
    "GtCdtSweAppTaskDefTaskRoleDefaultPolicyDA1A6410",
    "GtCdtSweAppTaskDefTaskRole3D1A54C4"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweAppService/TaskCount/Target/CpuScaling/Resource"
   }
  },
  "GtCdtSweVpcLinkFD1C9668": {
   "Type": "AWS::ApiGateway::VpcLink",
   "Properties": {
    "Name": "GtCdtSweVpcLink",
    "TargetArns": [
     {
      "Ref": "GtCdtSweNLBA0E95C6B"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweVpcLink/Resource"
   }
  },
  "GtCdtSweApiB6C504D1": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "FundSage API",
    "Name": "FundSage API"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Resource"
   }
  },
  "GtCdtSweApiCloudWatchRole4D45A657": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/CloudWatchRole/Resource"
   }
  },
  "GtCdtSweApiAccountF15BC3FC": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "GtCdtSweApiCloudWatchRole4D45A657",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "GtCdtSweApiB6C504D1"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Account"
   }
  },
  "GtCdtSweApiDeployment7699DA79ca310d9f45e016379dc8da5a7c1e1453": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "FundSage API",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "DependsOn": [
    "GtCdtSweApiapiapplicantsGET7356888E",
    "GtCdtSweApiapiapplicantsPOSTE9B118AF",
    "GtCdtSweApiapiapplicants77E75A9B",
    "GtCdtSweApiapiapplicationsGETAF1D0C7D",
    "GtCdtSweApiapiapplicationsPOST9A3587E6",
    "GtCdtSweApiapiapplications2482D9E8",
    "GtCdtSweApiapiauthloginPOST21E7CEF3",
    "GtCdtSweApiapiauthloginFE30C571",
    "GtCdtSweApiapiauth183DCB3B",
    "GtCdtSweApiapi37E301A9",
    "GtCdtSweApiapischemeseligibleGET4D76B329",
    "GtCdtSweApiapischemeseligibleF6B8C7F4",
    "GtCdtSweApiapischemesGETA5BBD9D2",
    "GtCdtSweApiapischemesC90B653D",
    "GtCdtSweApiopenapiyamlGET6C039801",
    "GtCdtSweApiopenapiyaml0D50A589",
    "GtCdtSweApiswaggerGETC66E6F09",
    "GtCdtSweApiswagger1FC53ACC"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Deployment/Resource"
   }
  },
  "GtCdtSweApiDeploymentStagetest9BFFB33E": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "GtCdtSweApiDeployment7699DA79ca310d9f45e016379dc8da5a7c1e1453"
    },
    "MethodSettings": [
     {
      "DataTraceEnabled": false,
      "HttpMethod": "*",
      "ResourcePath": "/*",
      "ThrottlingBurstLimit": 500,
      "ThrottlingRateLimit": 1000
     }
    ],
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    },
    "StageName": "test"
   },
   "DependsOn": [
    "GtCdtSweApiAccountF15BC3FC"
   ],
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/DeploymentStage.test/Resource"
   }
  },
  "GtCdtSweApiswagger1FC53ACC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "GtCdtSweApiB6C504D1",
      "RootResourceId"
     ]
    },
    "PathPart": "swagger",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/swagger/Resource"
   }
  },
  "GtCdtSweApiswaggerGETC66E6F09": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseTemplates": {
        "application/json": "{ \"message\": \"Documentation endpoint\" }"
       },
       "StatusCode": "200"
      }
     ],
     "PassthroughBehavior": "NEVER",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "GtCdtSweApiswagger1FC53ACC"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/swagger/GET/Resource"
   }
  },
  "GtCdtSweApiopenapiyaml0D50A589": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "GtCdtSweApiB6C504D1",
      "RootResourceId"
     ]
    },
    "PathPart": "openapi.yaml",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/openapi.yaml/Resource"
   }
  },
  "GtCdtSweApiopenapiyamlGET6C039801": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseTemplates": {
        "application/json": "{ \"message\": \"Documentation endpoint\" }"
       },
       "StatusCode": "200"
      }
     ],
     "PassthroughBehavior": "NEVER",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "GtCdtSweApiopenapiyaml0D50A589"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/openapi.yaml/GET/Resource"
   }
  },
  "GtCdtSweApiapi37E301A9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "GtCdtSweApiB6C504D1",
      "RootResourceId"
     ]
    },
    "PathPart": "api",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/Resource"
   }
  },
  "GtCdtSweApiapiauth183DCB3B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapi37E301A9"
    },
    "PathPart": "auth",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/auth/Resource"
   }
  },
  "GtCdtSweApiapiauthloginFE30C571": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapiauth183DCB3B"
    },
    "PathPart": "login",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/auth/login/Resource"
   }
  },
  "GtCdtSweApiapiauthloginPOST21E7CEF3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/auth/login"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapiauthloginFE30C571"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/auth/login/POST/Resource"
   }
  },
  "GtCdtSweApiapischemesC90B653D": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapi37E301A9"
    },
    "PathPart": "schemes",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/schemes/Resource"
   }
  },
  "GtCdtSweApiapischemesGETA5BBD9D2": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/schemes"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapischemesC90B653D"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/schemes/GET/Resource"
   }
  },
  "GtCdtSweApiapischemeseligibleF6B8C7F4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapischemesC90B653D"
    },
    "PathPart": "eligible",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/schemes/eligible/Resource"
   }
  },
  "GtCdtSweApiapischemeseligibleGET4D76B329": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/schemes/eligible"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapischemeseligibleF6B8C7F4"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/schemes/eligible/GET/Resource"
   }
  },
  "GtCdtSweApiapiapplicants77E75A9B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapi37E301A9"
    },
    "PathPart": "applicants",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applicants/Resource"
   }
  },
  "GtCdtSweApiapiapplicantsGET7356888E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/applicants"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapiapplicants77E75A9B"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applicants/GET/Resource"
   }
  },
  "GtCdtSweApiapiapplicantsPOSTE9B118AF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/applicants"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapiapplicants77E75A9B"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applicants/POST/Resource"
   }
  },
  "GtCdtSweApiapiapplications2482D9E8": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "GtCdtSweApiapi37E301A9"
    },
    "PathPart": "applications",
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applications/Resource"
   }
  },
  "GtCdtSweApiapiapplicationsGETAF1D0C7D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/applications"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapiapplications2482D9E8"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applications/GET/Resource"
   }
  },
  "GtCdtSweApiapiapplicationsPOST9A3587E6": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "ConnectionId": {
      "Ref": "GtCdtSweVpcLinkFD1C9668"
     },
     "ConnectionType": "VPC_LINK",
     "IntegrationHttpMethod": "GET",
     "Type": "HTTP_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "http://",
        {
         "Fn::GetAtt": [
          "GtCdtSweNLBA0E95C6B",
          "DNSName"
         ]
        },
        "/api/applications"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "GtCdtSweApiapiapplications2482D9E8"
    },
    "RestApiId": {
     "Ref": "GtCdtSweApiB6C504D1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/Default/api/applications/POST/Resource"
   }
  },
  "GtCdtSweApiGtCdtSweApiKey745DAA60": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Enabled": true,
    "StageKeys": [
     {
      "RestApiId": {
       "Ref": "GtCdtSweApiB6C504D1"
      },
      "StageName": {
       "Ref": "GtCdtSweApiDeploymentStagetest9BFFB33E"
      }
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/GtCdtSweApiKey/Resource"
   }
  },
  "GtCdtSweApiGtCdtSweUsagePlan3B5C12E1": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "GtCdtSweApiB6C504D1"
      },
      "Stage": {
       "Ref": "GtCdtSweApiDeploymentStagetest9BFFB33E"
      },
      "Throttle": {}
     }
    ],
    "Throttle": {
     "BurstLimit": 200,
     "RateLimit": 100
    },
    "UsagePlanName": "FundSage Usage Plan"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/GtCdtSweUsagePlan/Resource"
   }
  },
  "GtCdtSweApiGtCdtSweUsagePlanUsagePlanKeyResourceGtCdtSweStackGtCdtSweApiGtCdtSweApiKeyF7345C60B73C9E27": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "GtCdtSweApiGtCdtSweApiKey745DAA60"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "GtCdtSweApiGtCdtSweUsagePlan3B5C12E1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/GtCdtSweApi/GtCdtSweUsagePlan/UsagePlanKeyResource:GtCdtSweStackGtCdtSweApiGtCdtSweApiKeyF7345C60"
   }
  },
  "ApiGateway5xxErrorAlarm2C646F8D": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "API Gateway 5xx Error Rate",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ApiName",
      "Value": "FundSage API"
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "5XXError",
    "Namespace": "AWS/ApiGateway",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 5
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/ApiGateway5xxErrorAlarm/Resource"
   }
  },
  "EcsServiceCpuUtilizationAlarmB371F2C2": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "ECS Service CPU Utilization",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ClusterName",
      "Value": {
       "Ref": "GtCdtSweClusterBAD2B1F0"
      }
     },
     {
      "Name": "ServiceName",
      "Value": {
       "Fn::GetAtt": [
        "GtCdtSweAppService6F8B2FAD",
        "Name"
       ]
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "CPUUtilization",
    "Namespace": "AWS/ECS",
    "Period": 300,
    "Statistic": "Average",
    "Threshold": 80
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/EcsServiceCpuUtilizationAlarm/Resource"
   }
  },
  "DatabaseCapacityUtilizationAlarmC5E5F2D8": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Aurora Serverless Database Capacity Utilization",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DBClusterIdentifier",
      "Value": {
       "Ref": "GtCdtSweDatabase78F59F6C"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "ServerlessDatabaseCapacity",
    "Namespace": "AWS/RDS",
    "Period": 300,
    "Statistic": "Average",
    "Threshold": 0.8
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/DatabaseCapacityUtilizationAlarm/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31T227bMAz9lr6rWhdg23MuWxG064K46+vAyKzLRpEMkUoQGP73wZIdO9uwJx4e8U5qpj9++qzvbuDEt6bc31ra6aYQMHsFJ/7VoJnp5qU2avnqXjZLtYk7S6aIO4fScSPa+ij4DDuLIz9yc2ZvCIS8uxh34Ot604knkHsQPMFZbQIdQXAMvHaCweHFIFfSa3MRMG8HdKIKNDGQnO+Dj3Wq4b/E2lUBmVsVStbNCgR2wLi0kQWDyukvnqvFlBiMCzQh17haDI5JWTsWcAZbxcmED+CgwqCbXEXnlcUzhApl0sXF4K+XTLcKDetmkm6A3yBU0I2b9yt8JUfDsP9kvBMgh2HC9b4FhiOZvMAeFgZst8AuyNJHlwoIeou1ZxIfzgtgVAQH3Wx93n2SG2/JpGVl1CrrK9bNo68uUx1wq9ACCxnrodyBBWfIVceZbp5QTj7sHz2Ui8Tnlq/0wYZY0PXvA+7f8iwveSdqq6CuLZl0mRDFswFLrtLN2HhnnEZyzWTxHMDsyVVF9hvbviK6NFTlk03/6ZHcPl1yD7fIMq8pjW+Ec2O6kasV1tafh/uYaIVAldeVwBbZx2Aw7WRQ+pgZf0d582VH9Whe0wOmgnv0k6HCjYV0Ov9WHvDcKmN9LE8g5k03cwvhkGJ0oG2vcv+IUkeZVtEq50vU7/zhOLvTH7/ou5t3JroN0QkdUG+z/A3tbZIWnAQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "GtCdtSweStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "GtCdtSweApiEndpointF5AB87FA": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "GtCdtSweApiB6C504D1"
      },
      ".execute-api.ap-southeast-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "GtCdtSweApiDeploymentStagetest9BFFB33E"
      },
      "/"
     ]
    ]
   }
  },
  "ApiUrl": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "GtCdtSweApiB6C504D1"
      },
      ".execute-api.ap-southeast-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "GtCdtSweApiDeploymentStagetest9BFFB33E"
      },
      "/"
     ]
    ]
   }
  },
  "DatabaseEndpoint": {
   "Value": {
    "Fn::Join": [
     "",
     [
      {
       "Fn::GetAtt": [
        "GtCdtSweDatabase78F59F6C",
        "Endpoint.Address"
       ]
      },
      ":",
      {
       "Fn::GetAtt": [
        "GtCdtSweDatabase78F59F6C",
        "Endpoint.Port"
       ]
      }
     ]
    ]
   }
  },
  "ApiKey": {
   "Value": {
    "Ref": "GtCdtSweApiGtCdtSweApiKey745DAA60"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}